## Java运行机制概述
由于Java语言是Minecraft的实现语言，同时其本身具有易于逆向的特点，因此Java语言是本教程的主讲语言。在开始正式讲解逆向工程之前，了解Java语言的运行机制是必要的。
#### 本篇目的：
* 认识Java语言的编译原理
* 认识Java虚拟机(Java Virtual Machine, JVM)

### 一、“一次编译，处处运行”的语言

开发者写代码的根本目的，是要让计算机理解开发者的意图、并执行相应的指令。以执行方式的不同，可将编程语言分为**编译型语言**和**解释型语言**<sup>[注1]</sup>。

Python就是一种解释型语言，即在运行的过程中把源代码直接解释执行。这种语言的好处是具有跨平台的特点，即只需要分发源代码，即可在各种发行版本的解释器上执行成同样的效果。但由于每次执行代码都需要重新解释，故相对于编译型语言，其执行效率并不高。

对于C++等语言来说，它们属于编译型语言，在运行前必须将源代码编译成为可执行文件<sup>[注2]</sup>。然而由于架构的不同，可执行文件并不是体系结构中立的。即如果你把Windows平台上的可执行文件放到Ubuntu系统上便不可正常运行。并且，CPU的差异也可能会导致指令集的不同。(鼠标悬停在图片上可看图片介绍)

<figure class="thumbnails">
    <img src="part1/chapter1/pic/ARMasmcode.png" alt="ARM汇编代码" title="ARM汇编代码">
    <img src="part1/chapter1/pic/x86asmcode.png" alt="x86汇编代码" title="x86汇编代码">
</figure>

<figure class="thumbnails">
    <img src="part1/chapter1/pic/ARMmcode.png" alt="ARM机器指令" title="ARM机器指令">
    <img src="part1/chapter1/pic/x86mcode.png" alt="x86机器指令" title="x86机器指令">
</figure>

因此，对同一软件来说，发布多种发行版本是解决这个问题的办法。

而对于Java语言，其执行过程结合了**编译**和**解释**<sup>[1][2]</sup>两个过程。

编译过程由Java编译器(javac)完成，它将Java高级语言代码(.java)文件编译为Java字节码(.class)文件。字节码相对源代码而言更贴近于机器语言，呈现了一些类似于汇编语言的特征。但字节码代码与汇编代码不同，它具有**体系结构中立**的特点。同一份字节码程序可以由任何不同平台、安装于不同CPU环境的Java虚拟机解释执行，且执行效果完全一样。

解释过程由Java虚拟机(Java Virtual Machine, JVM)完成。JVM本质上是一个程序，靠解释执行字节码指令来最终完成对计算机的操作。

正因为Java同时具备编译型语言和解释型语言的优点，所以它被称为**一次编译，处处运行**的语言。

### 二、JVM简介
Java虚拟机是解释执行Java字节码程序的场所。本文将大致介绍一下JVM对字节码的执行过程。

首先，JVM会对字节码程序进行类加载。

本篇参考资料：
1. 《Java语言程序设计 基础篇 原书第10版》 Y.Daniel Liang著
2. 《编译原理 第二版》Alfred V. Aho等著
3. Cifuentes, Cristina Garcia and Kevin John Gough. “Decompilation of binary programs.” Software: Practice and Experience 25 (1995): n. pag.


注释：
1. 实际上，编译型语言和解释型语言的界限并不是绝对的。市面上便有许多款Python的编译器，同时也存在着C语言的解释器。
2. 这里说的实际上很笼统。整个执行过程实际上分为很多步，而编译只是其中的一步罢了。若想了解完整的执行过程，请参考《编译原理》这本书。